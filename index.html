<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Celestial Text Animation</title>
  <style>
    /* Basic Styles */
    body {
      margin: 0;
      height: 100vh;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #0a0a1f, #1a1a3a, #2a2a4a);
      font-family: 'Arial', sans-serif;
      position: relative;
      color: #fff;
    }
    /* Stars Background */
    .stars {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      animation: twinkle 5s infinite;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }
    /* Moon Styling */
    .moon {
      position: absolute;
      top: 50px;
      right: 50px;
      width: 150px;
      height: 150px;
      background: radial-gradient(circle at 30% 30%, #ffffff 0%, #f4f4f4 50%, #e0e0e0 100%);
      border-radius: 50%;
      box-shadow: 0 0 50px #ffffff80;
      animation: moonFloat 8s ease-in-out infinite;
      z-index: 2;
      transition: box-shadow 0.3s ease;
    }
    .moon:hover {
      box-shadow: 0 0 80px #ffffff;
    }
    .moon::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 70% 70%, transparent 0%, rgba(0,0,0,0.1) 50%);
      border-radius: 50%;
    }
    .moon::after {
      content: '';
      position: absolute;
      top: 20%;
      left: 15%;
      width: 30px;
      height: 30px;
      background: rgba(255,255,255,0.8);
      border-radius: 50%;
      filter: blur(5px);
    }
    @keyframes moonFloat {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      50% { transform: translate(-20px, 20px) rotate(5deg); }
    }
    /* Moon Beam */
    .moon-beam {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 200px;
      height: 4px;
      background: linear-gradient(90deg, rgba(255,255,255,0.8), transparent);
      transform-origin: left center;
      animation: beamRotate 8s infinite;
      opacity: 0.5;
    }
    @keyframes beamRotate {
      0%, 100% { transform: rotate(0deg); }
      50% { transform: rotate(180deg); }
    }
    /* Text Container */
    .text-container {
      position: relative;
      z-index: 3;
      max-width: 600px;
      min-height: 150px;
      padding: 20px;
      text-align: center;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .text-container h1 {
      font-size: 2.8em;
      margin-bottom: 30px;
      color: #fff;
      text-shadow: 0 0 10px rgba(255,255,255,0.5);
      opacity: 0;
      animation: titleReveal 2s forwards;
    }
    @keyframes titleReveal {
      to { opacity: 1; }
    }
    /* Letter Animations */
    .letter {
      position: absolute;
      display: inline-block;
      opacity: 0;
      transform: scale(0);
      text-shadow: 0 0 8px rgba(255,255,255,0.8);
    }
    @keyframes letterEmerge {
      0% {
        opacity: 0;
        transform: translate(var(--startX), var(--startY)) scale(0) rotate(var(--rotation));
      }
      50% {
        opacity: 1;
        transform: translate(var(--midX), var(--midY)) scale(1.2) rotate(calc(var(--rotation) * 0.5));
      }
      100% {
        opacity: 1;
        transform: translate(var(--endX), var(--endY)) scale(1) rotate(0deg);
      }
    }
    @keyframes letterSparkle {
      0% {
        opacity: 1;
        transform: scale(1);
        filter: brightness(1) blur(0px);
      }
      50% {
        opacity: 1;
        transform: scale(1.5);
        filter: brightness(2) blur(2px);
      }
      100% {
        opacity: 0;
        transform: scale(0);
        filter: brightness(3) blur(4px);
      }
    }
    /* Sparkle for Letters */
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      pointer-events: none;
      box-shadow: 0 0 8px 2px rgba(255,255,255,0.8);
    }
    @keyframes sparkleFloat {
      0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0);
      }
    }
    /* Moon Dust Effect */
    .moon-dust {
      position: absolute;
      width: 2px;
      height: 2px;
      background: rgba(255,255,255,0.8);
      border-radius: 50%;
      pointer-events: none;
    }
    @keyframes dustFloat {
      0% {
        opacity: 0;
        transform: translate(0, 0) scale(0);
      }
      50% {
        opacity: 1;
        transform: translate(var(--tx), var(--ty)) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(calc(var(--tx) * 2), calc(var(--ty) * 2)) scale(0);
      }
    }
    /* Comet Styling */
    .comet {
      position: absolute;
      width: 6px;
      height: 6px;
      background: linear-gradient(45deg, white, transparent);
      border-radius: 50%;
      box-shadow: 0 0 10px 2px white;
      pointer-events: none;
      opacity: 0;
    }
    @keyframes cometTrail {
      0% {
        opacity: 1;
        transform: translate(var(--startX), var(--startY));
      }
      80% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translate(var(--endX), var(--endY));
      }
    }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="moon">
    <div class="moon-beam"></div>
  </div>
  <div class="text-container">
    <h1>To My Celestial Love</h1>
  </div>

  <script>
    /* Create Stars */
    const starsContainer = document.querySelector('.stars');
    for (let i = 0; i < 150; i++) {
      createStar();
    }
    function createStar() {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.left = Math.random() * 100 + 'vw';
      star.style.top = Math.random() * 100 + 'vh';
      star.style.animationDelay = Math.random() * 5 + 's';
      starsContainer.appendChild(star);
    }

    /* Messages to Animate */
    const messages = [
      "In this vast cosmic dance of stars and moons, you are my universe's brightest light.",
      "Like the eternal moon that graces our night sky, your presence fills my world with wonder.",
      "Just as the moon pulls the tides, your soul has an inexplicable power over my heart.",
      "Through the darkest nights and stormiest seas, your light remains unwavering.",
      "Remember, my love - like the moon's phases, life's challenges are temporary.",
      "Your spirit, as boundless as the cosmos itself, cannot be contained.",
      "In moments when the world feels heavy, look up at our shared moon.",
      "Know that somewhere, I'm gazing at the same celestial guardian.",
      "Until our paths converge again under the moonlit sky, you are cherished beyond measure."
    ];

    const container = document.querySelector('.text-container');
    const moonElem = document.querySelector('.moon');
    let currentIndex = 0;

    /* Moon Dust Effect */
    function createMoonDust(x, y) {
      const dust = document.createElement('div');
      dust.className = 'moon-dust';
      dust.style.left = x + 'px';
      dust.style.top = y + 'px';
      
      const angle = Math.random() * Math.PI * 2;
      const distance = 50 + Math.random() * 100;
      dust.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
      dust.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);
      
      dust.style.animation = `dustFloat ${1 + Math.random()}s forwards`;
      document.body.appendChild(dust);
      setTimeout(() => dust.remove(), 1500);
    }

    /* Sparkles for Letters */
    function createSparkles(x, y) {
      for (let i = 0; i < 5; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = x + 'px';
        sparkle.style.top = y + 'px';
        
        const angle = Math.random() * Math.PI * 2;
        const distance = 30 + Math.random() * 50;
        sparkle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
        sparkle.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);
        
        sparkle.style.animation = `sparkleFloat ${0.5 + Math.random() * 0.5}s forwards`;
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 1000);
      }
    }

    /* Comet Effect */
    function createComet() {
      const comet = document.createElement('div');
      comet.className = 'comet';
      const startX = Math.random() * window.innerWidth;
      const startY = -20;
      const endX = startX - (50 + Math.random() * 100);
      const endY = window.innerHeight + 20;
      comet.style.setProperty('--startX', `${startX}px`);
      comet.style.setProperty('--startY', `${startY}px`);
      comet.style.setProperty('--endX', `${endX}px`);
      comet.style.setProperty('--endY', `${endY}px`);
      comet.style.left = startX + 'px';
      comet.style.top = startY + 'px';
      comet.style.animation = `cometTrail 3s linear forwards`;
      document.body.appendChild(comet);
      setTimeout(() => comet.remove(), 3000);
    }
    // Create a comet every 15 seconds
    setInterval(createComet, 15000);

    /* Animate Letters from the Moon to the Container */
    async function animateLetters(text) {
      const letters = text.split('');
      const containerRect = container.getBoundingClientRect();
      const moonRect = moonElem.getBoundingClientRect();
      // Moon center relative to the container
      const startX = moonRect.left + moonRect.width / 2 - containerRect.left;
      const startY = moonRect.top + moonRect.height / 2 - containerRect.top;
      
      // Define final positions for letters
      const letterSpacing = 18;    // Spacing between letters
      const baseX = 20;            // Starting X in the container
      const baseY = container.clientHeight / 2; // Center Y
      
      for (let i = 0; i < letters.length; i++) {
        const letter = document.createElement('div');
        letter.className = 'letter';
        letter.textContent = letters[i];
        
        // Calculate final letter position
        const endX = baseX + i * letterSpacing;
        const endY = baseY;
        
        // Wavy mid-point for a fluid motion
        const progress = i / letters.length;
        const amplitude = 30;
        const frequency = 2;
        const midX = startX + (endX - startX) * 0.5;
        const midY = startY + (endY - startY) * 0.5 + Math.sin(progress * Math.PI * frequency) * amplitude;
        
        // Set CSS custom properties for animation
        letter.style.setProperty('--startX', `${startX}px`);
        letter.style.setProperty('--startY', `${startY}px`);
        letter.style.setProperty('--midX', `${midX}px`);
        letter.style.setProperty('--midY', `${midY}px`);
        letter.style.setProperty('--endX', `${endX}px`);
        letter.style.setProperty('--endY', `${endY}px`);
        // Subtle rotation between -10° and 10°
        letter.style.setProperty('--rotation', `${Math.random() * 20 - 10}deg`);
        
        container.appendChild(letter);
        letter.style.animation = 'letterEmerge 2s forwards';
        
        // Create a little moon dust effect at the source
        createMoonDust(moonRect.left + moonRect.width / 2, moonRect.top + moonRect.height / 2);
        await new Promise(resolve => setTimeout(resolve, 100));
      }
      
      // Wait for letters to fully emerge
      await new Promise(resolve => setTimeout(resolve, 3000));
      
      // Sparkle and remove each letter one by one
      const lettersElements = container.querySelectorAll('.letter');
      for (let letter of lettersElements) {
        const rect = letter.getBoundingClientRect();
        letter.style.animation = 'letterSparkle 1s forwards';
        createSparkles(rect.left + rect.width/2, rect.top + rect.height/2);
        await new Promise(resolve => setTimeout(resolve, 50));
      }
      
      // Clean up after the sparkle effect
      await new Promise(resolve => setTimeout(resolve, 1000));
      lettersElements.forEach(letter => letter.remove());
    }

    /* Loop through and display messages continuously */
    async function showMessages() {
      while (true) {
        await animateLetters(messages[currentIndex]);
        currentIndex = (currentIndex + 1) % messages.length;
        // Brief pause between messages
        await new Promise(resolve => setTimeout(resolve, 1000));
      }
    }

    // Start everything after a short delay
    setTimeout(showMessages, 2000);
  </script>
</body>
</html>
